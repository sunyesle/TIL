# 인터럽트(Interrupt)
CPU가 현재 작업을 잠시 중단하고, 특정 작업을 수행하도록 하는 것

CPU가 프로그램을 실행하고 있을 때, 입출력 하드웨어 등의 장치에 예외 상황이 발생하여 처리가 필요할 경우에 CPU에게 알려 처리할 수 있도록 하는 것

## 인터럽트 종류
### 하드웨어 인터럽트
외부 주변장치가 자신에게 발생한 사건을 운영체제 커널에게 알리는 수단이다.
외부 주변장치에 의해 비동기적으로 발생한다.

- **전원 이상 인터럽트**: 정전이나 전원공급의 이상
- **기계 착오 인터럽트**: CPU의 기능적인 오류
- **외부 인터럽트**: I/O 장치가 아닌 오퍼레이터나 타이머에 의해 의도적으로 프로그램이 중단된 경우
- **입출력 인터럽트\(I/O interrupt\)**: 입출력 작업의 종료나 입출력의 오류에 의해 CPU의 기능이 요청되는 경우

### 소프트웨어 인터럽트
실행 중인 프로세스에서 발생한 소프트웨어적인 사건을 운영체제 커널에 알리는 수단이다.
소프트웨어적인 오류로 인해 발생하거나, System call을 위해 소프트웨어적인 요청을 하여 발생한다.

- **프로그램 검사 인터럽트\(Program check interrupt\)**: Division by zero, Overflow/Underflow, 메모리 접근 오류 등
- **SVC 인터럽트\(Supervisor call interrupt\)**

## 인터럽트 우선순위
일반적으로 하드웨어 인터럽트가 소프트웨어 인터럽트보다 우선순위가 높고, 외부 인터럽트가 내부 인터럽트보다 우선순위가 높다.

<img width="413" alt="Image" src="https://github.com/user-attachments/assets/42c5b404-b97d-439f-846a-4e6790364c02" />

## 인터럽트 벡터(Interrupt Vector)
인터럽트가 발생했을 때, 그 인터럽트를 처리할 수 있는 서비스 루틴(ISR)의 주소를 가지고 있는 공간이다.

## 인터럽트 서비스 루틴(Interrupt Service Routine, ISR)
인터럽트를 처리하는 커널 함수이다. 인터럽트 핸들러(Interrupt Handler)라고도 부른다.

## 인터럽트 처리 과정
- **1. 인터럽트 요청**
- **2. 프로그램 실행 중단**
  - 현재 실행 중이던 명령어까지 수행
- **3. 현재 실행 중인 프로그램 상태 보관**
  - PCB, PC 저장
- **4. 인터럽트 원인 판별**
  - 인터럽트를 요청한 장치를 식별 -> 인터럽트 원인을 파악
  - 인터럽트 벡터 테이블을 참조하여 호출할 IRS(인터럽트 서브 루틴) 주소 값을 얻음
- **5. ISR\(인터럽트 서브 루틴\) 처리**
  - 실질적인 인터럽트 처리 작업을 한다.
  - 서비스 루틴 수행 중, 우선순위가 더 높은 인터럽트가 발생하면 재귀적으로 1~5번 과정을 수행한다.
- **6. 상태 복구**
  - 저장해둔 PC를 다시 복구한다.
- **7. 중단된 프로그램 실행 재개**
  - PCB의 값을 이용하여 이전에 수행 중이던 프로그램을 재개한다.

---
**Reference**<br>
- https://doh-an.tistory.com/31
- http://www.ktword.co.kr/test/view/view.php?m_temp1=767&id=869
- https://itwiki.kr/w/%EC%9D%B8%ED%84%B0%EB%9F%BD%ED%8A%B8
- https://baebalja.tistory.com/354
- https://hellouz818.tistory.com/8
