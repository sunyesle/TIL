# HTTPS(HyperText Transfer Protocol Secure)

## HTTPS란
- HTTPS는 **HTTP의 보안이 강화된 버전**이다.
- HTTP를 기반으로 웹 서버와 통신하되 **암호화 통신**을 위한 별도의 협의 과정을 거치게 된다. 이때 **SSL**과 **TLS**라는 프로토콜을 사용하여 데이터를 암호화한다.
- HTTPS의 기본 TCP/IP 포트는 **443**이다.
- HTTPS를 사용하는 웹페이지의 URI는 `https://` 로 시작한다.

### 통신 과정
![Image](https://github.com/user-attachments/assets/2ac476d5-0584-4255-b8e1-59db6715bf5c)

## SSL 인증서
인증 기관(CA)에서 발급하는 인증서이다.
인증서는 클라이언트가 접속한 서버가 신뢰할 수 있는 서버인지 보장하는 역할을 한다.

## Key
HTTPS에서 암호화와 복호화 작업을 위해서는 키가 필요하다.

### 대칭키
암호화/복호화에 동일한 하나의 키를 사용한다.
- **장점**: 암호화와 복호화 속도가 빠르다.
- **단점**: 키 관리의 어려움. 동일한 키를 사용하기 키를 안전하게 관리하고 전달해야 한다.

### 비대칭키
암호화/복호화에 각각 다른 키를 사용한다. 공개키로 암호화한 데이터는 개인키로 복호화할 수 있다.
- **장점**: 키 관리의 용이성. 공개키는 안전하게 공유될 수 있으며, 개인키는 소유자만 관리하면 된다.
- **단점**: 암호화와 복호화 속도가 빠르다.

**공개키**는 공개 가능한 키이다. 개인키와 쌍을 이루어 존재한다.
**개인키**는 사적인 키로 오로지 key 발행자만이 갖는 키이다. 공개키와 쌍을 이루어 존재한다.

> 공개키로 암호화 → 개인키로 복호화 ⇒ **데이터 보안**<br>
> 개인키로 암호화 → 공개키로 복호화 ⇒ **전자 서명**

## HTTP 통신 과정
![Image](https://github.com/user-attachments/assets/71e0824e-a8bc-49e0-b9ef-dead36740402)

위 그림과 함께 클라이언트와 서버가 어떻게 SSL 인증서를 검증하고, 데이터를 암호화/복호화하는지 살펴보자.

- **[1] 서버**: 한 쌍의 서버의 공개키와 개인키를 생성한다. 그리고 서버 내 사이트의 각종 정보와 자신(서버)의 공개키를 인증기관에 전달하여 SSL 인증서 생성을 요청한다.
- **[2] 인증기관**: SSL 인증서를 발급한다. 이 인증서에는 서버의 도메인을 비롯하여 서버임을 증명하는 각종 정보를 담고 있다. 이때 인증기관은 자신만의 한 쌍의 공개키와 개인키를 생성하고, SSL 인증서를 인증기관의 개인키로 암호화하여 서버에게 전달하고, 서버는 이 SSL 인증서를 게시한다.
- **[3] 웹브라우저**: 인증기관의 개인키로 암호화된 SSL 인증서를 서버로부터 전달받았다. SSL 인증서가 진짜인지 검증하려고 한다.
- **[4~5] 웹브라우저**: 인증기관에서 공개하고 있는 인증기관의 공개키를 가져와 이 SSL 인증서를 복호화해 본다. 만약 복호화되어 서버의 정보를 확인할 수 있다면, SSL 인증서는 진짜이다. 인증서를 보유한 서버가 진짜임을 밝힘과 동시에 발급한 대상이 인증기관임을 알 수 있다. 그리고 웹 브라우저는 서버의 공개키를 확보했다.
- **[6] 웹브라우저**: 웹브라우저가 서버를 신뢰하고 있다. 방금 전달받은 서버의 공개키로 실제 데이터 암호화에 사용할 비밀키(대칭키)를 암호화하여 서버에게 전송한다.
- **[7] 서버**: 서버는 웹브라우저가 자신(서버)의 공개키로 암호화하여 전달한 비밀키(대칭키)를 자신의 개인키로 복호화한다. 이로써 웹브라우저와 서버는 동일한 비밀키(대칭키)를 보유하게 된다.

---
**Reference**<br>
- https://aws-hyoh.tistory.com/38
