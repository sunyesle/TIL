# 세션
## 세션(Session)
세션은 특정 시간동안 동일한 사용자로부터 들어오는 일련의 요청을 의미한다.
세션 관리는 사용자를 식별하고 상태 정보를 유지하는 방법을 말한다.

HTTP는 무상태(stateless) 프로토콜이기 때문에, 상태 정보를 유지하기 위해 별도의 메커니즘이 필요하다.

## 서블릿과 세션
서블릿 컨테이너(Tomcat, Jetty 등)는 세션 관리를 담당한다.
컨테이너는 서블릿 스펙을 구현하여 세션 생성, 식별, 저장, 조회, 만료 기능을 제공한다.

### 동작 방식
최초 요청 시 서블릿 컨테이너는 클라이언트에게 고유한 세션 ID를 발급한다.
서버는 세션 ID 별로 세션 정보를 저장하며, 세션 ID는 쿠키 또는 URL Rewrite를 통해 클라이언트에게 전달된다.

이후 클라이언트가 요청을 보낼 때 세션 ID를 함께 전달하면, 서버는 세션 ID를 통해 세션 정보를 조회할 수 있다.

일정 시간 요청이 없거나, 서버에서 `session.invalidate()`를 호출하는 경우 세션이 제거된다.

### HttpSession
세션은 `HttpSession` 인터페이스 객체로 표현되며, `HttpServletRequest.getSession()` 메서드를 통해 세션 객체를 얻을 수 있다.
```java
public class SessionServlet extends HttpServlet{

    @Override
    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException 
        HttpSession session = req.getSession();

        // 세션에 데이터 저장
        session.setAttribute("user", "abc");

        // 세션에서 데이터 조회
        String user = (String) session.getAttribute("user");

        // 세션에서 데이터 삭제
        session.removeAttribute("user");

        // 세션 제거
        session.invalidate();
    }
}
```

---
**Reference**<br>
- https://en.wikipedia.org/wiki/Session_(computer_science)
- https://kadensungbincho.tistory.com/63
- https://www.ibm.com/docs/ko/was-nd/9.0.5?topic=applications-sessions
